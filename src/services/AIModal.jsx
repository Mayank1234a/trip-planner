import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
   export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget ,Give me a Hotels options list with\nHotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place\nDetails, Place Image Url, Geo Coordinates, ticket Pricing, Rating, Time travel each of the location for 3 days with each day plan with best\ntime to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"location\": \"Las Vegas, Nevada\",\n  \"budget\": \"Cheap\",\n  \"duration\": \"3 Days\",\n  \"travelers\": \"Couple\",\n  \"bestTimeToTravel\": {\n    \"overall\": \"Spring (March-May) or Fall (September-November)\",\n    \"reason\": \"These shoulder seasons offer the most comfortable weather with fewer crowds than the peak summer months. Temperatures are warm during the day and cool in the evenings, making it perfect for walking and enjoying outdoor activities. Hotel rates are also generally lower than in summer or around major holidays.\",\n    \"avoid\": \"Summer (June-August) and major holidays. Summer can be extremely hot, with temperatures often exceeding 100°F (38°C), making it unpleasant to walk around. Major holidays such as Christmas, New Year, and major conventions can lead to higher hotel prices and larger crowds.\"\n  },\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n         \"usd\": 40,\n        \"inr\": 3320\n      },\n      \"hotelImageURL\": \"https://media.cntraveler.com/photos/5a9c44b944c87242b784f34e/16:9/w_2560%2Cc_limit/Circus-Circus-Hotel-Las-Vegas-Nevada-Exterior.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1369,\n        \"longitude\": -115.1630\n      },\n      \"rating\": 3.5,\n      \"description\": \"A budget-friendly option on the Strip with a circus theme. Features a casino, pools, and the Adventuredome indoor theme park (extra cost). Simple rooms and can be noisy. Good for families and those seeking value.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n          \"usd\": 50,\n          \"inr\": 4150\n      },\n      \"hotelImageURL\": \"https://www.vegas.com/wp-content/uploads/2015/07/excalibur-casino-las-vegas-800x480.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0989,\n        \"longitude\": -115.1734\n      },\n      \"rating\": 3.8,\n      \"description\": \"A castle-themed hotel on the south end of the Strip. Has a large casino, several restaurants, pools, and a fun atmosphere. Rooms are basic but comfortable. Good for couples and those looking for a unique stay.\"\n    },\n    {\n      \"hotelName\": \"Tuscany Suites & Casino\",\n      \"hotelAddress\": \"255 E Flamingo Rd, Las Vegas, NV 89169\",\n      \"price\": {\n          \"usd\": 60,\n          \"inr\": 4980\n      },\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/29/f9/20/tuscany-suites-casino.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1154,\n        \"longitude\": -115.1539\n      },\n      \"rating\": 4.2,\n      \"description\": \"Located just off the Strip, this hotel offers spacious suites and a relaxed atmosphere. Features a pool, several dining options, and a casino. A good choice if you want a bit more space and quieter surroundings.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"theme\": \"South Strip & Free Entertainment\",\n      \"bestTimeToVisit\": {\n        \"morning\": \"9am-10am: Visit the 'Welcome to Fabulous Las Vegas' sign for photos. It's less crowded and the lighting is usually better in the morning.\",\n        \"afternoon\": \"2pm-5pm: Head to the Bellagio Conservatory & Botanical Gardens, which is open throughout the day. Spend the late afternoon exploring.\",\n        \"evening\": \"7pm-10pm: Enjoy the Bellagio Fountains in the evening when the water show is most impressive.\",\n        \"overall\": \"Late Afternoon/Evening\"\n      },\n      \"activities\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign at the south end of the Strip. Great for photos!\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Welcome_to_Fabulous_Las_Vegas_sign.jpg/800px-Welcome_to_Fabulous_Las_Vegas_sign.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0829,\n            \"longitude\": -115.1726\n          },\n          \"ticketPricing\": {\n            \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.5,\n          \"timeTravel\": \"5-10 minutes\",\n          \"bestTimeToVisit\": \"9am-10am\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n          \"placeDetails\": \"Beautifully themed indoor garden that changes seasonally. Free to walk through.\",\n          \"placeImageURL\": \"https://images.squarespace-cdn.com/content/v1/5c5e0228840b16766a8a69f2/1632765301857-42W86K3R3M8U56S06741/Bellagio-Conservatory-Garden-Display-2.jpg?format=1000w\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1742\n          },\n            \"ticketPricing\": {\n            \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.7,\n          \"timeTravel\": \"10-15 minutes by car from the previous location\",\n          \"bestTimeToVisit\": \"2pm-5pm\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"Free water show with music and lights in front of the Bellagio Hotel. Runs every 30 minutes in the afternoon and every 15 minutes in the evening.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Bellagio_Fountain.jpg/1280px-Bellagio_Fountain.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1124,\n            \"longitude\": -115.1735\n          },\n          \"ticketPricing\": {\n              \"usd\":0,\n              \"inr\": 0\n           },\n          \"rating\": 4.8,\n          \"timeTravel\": \"0-5 minutes walking from Bellagio Conservatory & Botanical Gardens\",\n          \"bestTimeToVisit\": \"7pm-10pm\"\n        },\n        {\n          \"placeName\": \"Walk the Strip\",\n          \"placeDetails\": \"Stroll the Las Vegas Strip, taking in the sights, street performers, and energy.\",\n          \"placeImageURL\": \"https://www.planetware.com/wpimages/2023/07/las-vegas-best-attractions-walk-the-strip.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1162,\n            \"longitude\": -115.1749\n          },\n          \"ticketPricing\": {\n            \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.6,\n          \"timeTravel\": \"Time Depends on your walking speed\",\n          \"bestTimeToVisit\": \"Any time\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"Downtown & Fremont Street Experience\",\n      \"bestTimeToVisit\": {\n        \"morning\": \"9am-11am: Explore any downtown murals and street art early in the morning when the area is quieter.\",\n        \"afternoon\": \"1pm-3pm: Spend the afternoon exploring shops and enjoying lunch at the Container Park.\",\n        \"evening\": \"7pm-11pm: The Fremont Street Experience is best enjoyed in the evening when the light shows and live music are in full swing.\",\n        \"overall\": \"Evening\"\n      },\n      \"activities\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Pedestrian mall with a massive LED canopy screen showing light shows, live music, and street performers.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Fremont_Street_Experience_Las_Vegas_July_2011.jpg/1280px-Fremont_Street_Experience_Las_Vegas_July_2011.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1411\n          },\n             \"ticketPricing\": {\n            \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.7,\n          \"timeTravel\": \"30 minutes by car or bus from the Strip\",\n          \"bestTimeToVisit\": \"7pm-11pm\"\n        },\n        {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"Shopping, dining, and entertainment complex built from shipping containers.\",\n          \"placeImageURL\": \"https://images.squarespace-cdn.com/content/v1/5478b4bde4b0a9e3c5a3005a/1589914098669-72K922N9L3D5K3D60M90/LV+container+park+1.jpg?format=1000w\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1695,\n            \"longitude\": -115.1396\n          },\n         \"ticketPricing\": {\n            \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.3,\n          \"timeTravel\": \"5-10 minutes walk from Fremont Street Experience\",\n          \"bestTimeToVisit\": \"1pm-3pm\"\n        },\n        {\n          \"placeName\": \"Mob Museum\",\n          \"placeDetails\": \"If you have some extra budget, this is worth visiting. Interactive museum about organized crime.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/The_Mob_Museum.jpg/1280px-The_Mob_Museum.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1727,\n            \"longitude\": -115.1402\n          },\n          \"ticketPricing\": {\n            \"usd\": 30,\n            \"inr\": 2490\n           },\n          \"rating\": 4.5,\n          \"timeTravel\": \"5-10 minutes walk from Container Park\",\n          \"bestTimeToVisit\": \"1pm-5pm\"\n        },\n        {\n          \"placeName\": \"Downtown Las Vegas Murals\",\n          \"placeDetails\": \"Explore the vibrant street art in downtown Las Vegas.\",\n          \"placeImageURL\": \"https://images.squarespace-cdn.com/content/v1/5c5e0228840b16766a8a69f2/1582145250888-B5U56X9KAVZ107851S05/IMG_1670.JPG?format=1000w\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1699,\n            \"longitude\": -115.1457\n          },\n           \"ticketPricing\": {\n            \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.4,\n          \"timeTravel\": \"Time depends on the murals you want to see and walking speed\",\n          \"bestTimeToVisit\": \"9am-11am\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"theme\": \"Mid-Strip Exploration & Departure\",\n      \"bestTimeToVisit\": {\n        \"morning\": \"9am-11am: Start your day exploring The LINQ Promenade, which is pleasant in the morning before it gets too hot.\",\n        \"afternoon\": \"1pm-3pm: Enjoy the Venetian Canals & Streetmosphere during the early afternoon. You can do the Mirage Volcano in the afternoon too, since it shows hourly in the evening.\",\n        \"overall\": \"Morning/Early Afternoon\"\n      },\n      \"activities\": [\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping and dining area with the High Roller observation wheel.\",\n          \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/10/c3/f3/b4/linq-promenade.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1170,\n            \"longitude\": -115.1696\n          },\n          \"ticketPricing\": {\n             \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.3,\n          \"timeTravel\": \"15-20 minutes by car or bus from Fremont street.\",\n          \"bestTimeToVisit\": \"9am-11am\"\n        },\n        {\n          \"placeName\": \"Mirage Volcano\",\n          \"placeDetails\": \"Free erupting volcano show in front of The Mirage Hotel. Erupts every hour in the evening.\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Mirage_Volcano.jpg/1280px-Mirage_Volcano.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1216,\n            \"longitude\": -115.1732\n          },\n          \"ticketPricing\": {\n             \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.6,\n          \"timeTravel\": \"5 minutes by car/bus from the LINQ Promenade\",\n          \"bestTimeToVisit\": \"Any Time After Noon\"\n        },\n        {\n          \"placeName\": \"Venetian Canals & Streetmosphere\",\n          \"placeDetails\": \"Explore the canals and street performers at the Venetian Hotel. Gondola rides available at an extra cost.\",\n          \"placeImageURL\": \"https://cdn.britannica.com/41/164441-050-576A6409/Canals-shops-Venetian-Hotel-Casino-Las-Vegas.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1214,\n            \"longitude\": -115.1698\n          },\n            \"ticketPricing\": {\n             \"usd\":0,\n            \"inr\": 0\n           },\n          \"rating\": 4.5,\n          \"timeTravel\": \"5-10 minutes by car/bus from the Mirage Volcano\",\n           \"bestTimeToVisit\": \"1pm-3pm\"\n        },\n        {\n          \"placeName\": \"Departure\",\n          \"placeDetails\": \"Head to the airport for your departure.\",\n          \"placeImageURL\": \"\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0800,\n            \"longitude\": -115.1522\n          },\n           \"ticketPricing\": {\n             \"usd\":\"N/A\",\n            \"inr\":\"N/A\"\n           },\n          \"rating\": \"N/A\",\n          \"timeTravel\": \"15-20 minutes by car/bus from the Venetian Hotel\",\n          \"bestTimeToVisit\": \"N/A\"\n        }\n      ]\n    }\n  ]\n}\n```"},
          ],
        },
      ],
    });
  